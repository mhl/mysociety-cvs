# Apache configuration.
#
# Copyright (c) 2004 UK Citizens Online Democracy. All rights reserved.
# Email: matthew@mysociety.org; WWW: http://www.mysociety.org
# 
# $Id: httpd.conf,v 1.9 2009-06-05 10:05:13 francis Exp $

<Location /fcgi>
    Options +ExecCGI
    SetHandler fastcgi-script
</Location>

RewriteEngine on

RewriteRule ^/station/([A-Z0-9]+)$   /index.cgi?station_id=$1 [QSA]
RewriteRule ^/grid/([0-9]+)/([0-9]+)$   /index.cgi?target_e=$1&target_n=$2 [QSA]
RewriteRule ^/postcode/([0-9A-Z]+)$   /index.cgi?target_postcode=$1 [QSA]
RewriteRule ^/stats$   /index.cgi?stats=1 [QSA]
RewriteRule ^/help$      /static.cgi?page=faq [QSA]
RewriteRule ^/contact$   /contact.cgi [QSA]

# Invites
RewriteRule ^/[Tt]/([0-9A-Za-z]{16,18}).*$ /invite.cgi?token=$1
RewriteRule ^/signup$    /invite.cgi?signup=1 [QSA]
RewriteRule ^/invite$    /invite.cgi [QSA]

RewriteRule ^/cloudmade-tiles/([^/]*)/([^/]*)/([^/]*)\.png$   /proxy.cgi?z=$1&x=$2&y=$3

