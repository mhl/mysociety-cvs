#!/usr/bin/perl -w
use strict;

# Generates CatComm version of CSS file from main PledgeBank CSS file

open(MAINCSS, "../web/pb.css") or die "";
open(NEWCSS, ">../web/microsites/autogen/o2.css") or die "";

print NEWCSS "/* AUTOMATICALLY GENERATED by make_o2_css, do not edit */\n";
print NEWCSS "\n";

my $selector = "";
while(<MAINCSS>) {
    if (m/^(.*) {/) { $selector = $1 }

    s/pb.css/o2.css/;
    s/Top-level style sheet for PledgeBank.com/Custom style sheet for O2 version of PledgeBank/;

    s/#000000/#2385c2/gi if ($selector eq 'a:hover, a:active');
    s/#522994/#000066/gi if ($selector eq 'a:link');

    s/top: 2.75em;/top: 48px;/ if ($selector eq "ul#nav");
    s/padding.*;/padding: 0;/ if ($selector eq 'h1');
    print NEWCSS <<EOF if (m/^}/ && $selector eq 'h1');
    background-image: url("/microsites/o2/stretch.jpg");
    height: 66px;
EOF

    s/font-family.*;/font-family: Verdana, Arial, sans-serif;/ if ($selector eq 'body');
    print NEWCSS <<EOF if (m/^}/ && $selector eq 'body');
    line-height: 1.4em;
    min-width: 770px;
    font-size: x-small; /* IE5 Win */
    voice-family: "\\"}\\""; 
    voice-family: inherit;
    font-size: small;
}
    
html>body { /* be nice to Opera */
    font-size: small;
EOF

    s/#522994/#000066/gi;  # link colour; most borders
    s/#7b52a5/#2385c2/gi;  # visited link colour
    s/#21004a/#ffffff/gi;  # purple lettering
    s/#9c7bbd/#000066/gi;  # darker purple background (at top of page)
    s/#f6e5ff/#caddee/gi;  # lighter pink plaque background
    s/#c6b5de/#caddee/gi;  # darker pink plaque background

    print NEWCSS $_;
}
print NEWCSS <<EOF;
h2, h3, h4, h5, h6 {
    margin:0.5em 0;
    color:#006;
}

h1 {
    font-size: 160%;
    font-weight:normal;
}
h2 {
    font-size:120%;
    font-bold:normal;
}
h3 {
    font-size:110%;
    font-weight:bold;
}
h4{
    font-size: 100%;
    font-weight:bold;
}
a{
    color:#006;
    font-weight:normal;
}
a:hover{
    text-decoration:none;
}

input, select, textarea {
    font-size:100%;
}
EOF
