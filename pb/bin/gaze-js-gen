#!/usr/local/bin/php -q
<?php
// gaze.js.gen
// 
//
// Copyright (c) 2005 UK Citizens Online Democracy. All rights reserved.
// Email: francis@mysociety.org. WWW: http://www.mysociety.org
//
// $Id: gaze-js-gen,v 1.2 2005-09-10 12:32:25 francis Exp $

require_once "../phplib/pbcgi.php";
require_once '../../phplib/gaze.php';
require_once '../../phplib/utility.php';

$gazejs = fopen('../web/gaze.js', 'w');

$header = <<<END
// gaze.js
//
// Countries which Gaze has local placenames for.
// This file autogenerated by gaze-js-gen, DO NOT EDIT DIRECTLY.
//
// Copyright (c) 2005 UK Citizens Online Democracy. All rights reserved.
// Email: francis@mysociety.org. WWW: http://www.mysociety.org

var gaze_countries = new Array()

END;
fwrite($gazejs, $header);

$countries_with_gazetteer = gaze_get_find_places_countries();
gaze_check_error($countries_with_gazetteer);
foreach ($countries_with_gazetteer as $country) {
    fwrite($gazejs, "gaze_countries['$country'] = 1\n");
}

