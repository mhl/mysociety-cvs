#!/usr/bin/php -q
<?php
// gaze.js.gen
// 
//
// Copyright (c) 2005 UK Citizens Online Democracy. All rights reserved.
// Email: francis@mysociety.org. WWW: http://www.mysociety.org
//
// $Id: gaze-js-gen,v 1.8 2006-06-05 13:44:42 chris Exp $


$long_opts = $short_opts = '';

chdir(dirname($_SERVER['SCRIPT_FILENAME']));
require_once "../phplib/pbcli.php";
require_once '../../phplib/gaze.php';
require_once '../../phplib/utility.php';

$gazejs = fopen('../web/gaze.js', 'w');

$header = <<<END
// gaze.js
//
// Countries which Gaze has local placenames for.
// This file autogenerated by gaze-js-gen, DO NOT EDIT DIRECTLY.
//
// Copyright (c) 2005 UK Citizens Online Democracy. All rights reserved.
// Email: francis@mysociety.org. WWW: http://www.mysociety.org

var gaze_countries = new Array()

END;
fwrite($gazejs, $header);

$countries_with_gazetteer = gaze_get_find_places_countries();
if (gaze_get_error($countries_with_gazetteer))
    exit;
foreach ($countries_with_gazetteer as $country) {
    fwrite($gazejs, "gaze_countries['$country'] = 1\n");
}

