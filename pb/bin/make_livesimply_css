#!/usr/bin/perl -w
use strict;

# Generates livesimply version of CSS file from main PledgeBank CSS file

open(MAINCSS, "../web/pb.css") or die "";
open(LIVESIMPLYCSS, ">../web/microsites/autogen/livesimply.css") or die "";

print LIVESIMPLYCSS "/* AUTOMATICALLY GENERATED by make_livesimply_css, do not edit */\n";
print LIVESIMPLYCSS "\n";

my $selector = "";
while(<MAINCSS>) {
    if (m/^(.*) {/) { $selector = $1 }

    next if ($selector =~ m/ul#nav/);

    s/pb.css/livesimply.css/;
    s/Top-level style sheet for PledgeBank.com/Custom style sheet for Live Simply version of PledgeBank/;

    $_ = "    font-family: verdana, arial, helvetica, sans-serif;\n" if m/font-family/;

    # Overall look
    s/#ffffff/#888888/gi if ($selector eq "h1 span#logo_pledge");
    s/#ffffff/#000000/gi if ($selector eq "h1 span#beta");
    s/top: 2px; right: 2px;/top: 4px; right: 4px;/ if ($selector eq "#search");
    s/top: 2.75em;/top: 120px;/ if ($selector eq "ul#nav");
    s/margin: 0 1em 0 0;/margin: -1.2em 0.5em 0 0;/ if ($selector eq "ul#nav");
    s/margin: 1em auto 0;/margin: 1em 0 0 16em;/ if ($selector eq "#pbcontent");

    # Link colours
    s/#522994/#0000ff/gi if (!m/border/);  # link colour
    s/#7b52a5/#0000aa/gi;  # visited link colour
    s/#21004a/#000000/gi;  # purple lettering/thin-borders 
    s/#522994/#000000/gi if (m/border/);  # border colour

    # Pledge box etc. colours and borders
    s/#9c7bbd/#000000/gi if ($selector =~ m/input/);
    s/background-color: #9c7bbd;/background-image: url(\/livesimply-body.gif);/i;
    s/#f6e5ff/#cecfce/gi;  # lighter pink plaque background
    s/#c6b5de/#00aab5/gi;  # darker pink plaque background
    s/#ffff99/#ffffee/gi;  # "spread the word" yellow
    s/#ff8429/#ffbb88/gi;  # 'spread the word' orange border
    
    # Headings
    s/font-size: 200%;/font-size: 130%;/ if ($selector eq "h1");
    print LIVESIMPLYCSS "    font-size: 120%;\n" if (m/^}/ && $selector eq 'h2');
    print LIVESIMPLYCSS "    font-size: 100%;\n" if (m/^}/ && $selector eq 'h3');

    # Body
    print LIVESIMPLYCSS "    font-size: 0.8em;\n" if (m/^}/ && $selector eq 'body');

    print LIVESIMPLYCSS $_;
}

print LIVESIMPLYCSS "\nh2 { color: #000000; }\n";

print LIVESIMPLYCSS <<END;

/* From Partnerbasic.css */

#nav ul{
    margin: 0;
    padding: 0;
    list-style-type: none;
    background-color:#ffffff;
    color: black;
}

#nav {
    font-size: 90%;
    position: absolute;
    top: 120px;
    left: 0px; 
    clear: right;
}

/* From Partnerlevel2.css */

/* NAVIGATION */
/* Left nav */
.Line{
	border-bottom: 2px solid white;
}

ul#nav{
	margin: 0;
	padding: 0;
	list-style-type: none;
    width: 17em;
}

ul#nav li{
	list-style-type: none;
	vertical-align: text-top;
    text-align: left;
    text-transform: lowercase;
    padding-bottom: 2px;
}

ul#nav a{
	color: white;
	display: block;
	padding: 3px 3px 3px 8px;
	background-color: #9C9A9C;
	font-weight: bold;
	vertical-align: text-top;
    text-decoration: none;
}

ul#nav strong{
	display: block;
	padding: 3px 3px 3px 8px;
	color: white;
	vertical-align: text-top;
	background-color: #636563;
}

ul#nav a:hover{
	background-color: #636563;
	text-decoration: none;
	color: white;
}

ul#nav ul{
	margin: 0 0 0 22px;
	padding: 0;
}

ul#nav li{
	list-style-image: url(/images/sub/Disc_Bullet.gif);
}

ul#nav li.Plus{
	list-style-image: url(/images/sub/Plus_Bullet.gif);
}

ul#nav li.Arrow{
	list-style-image: url(/images/sub/Arrow_Bullet.gif);
}

ul#nav ul a{
	font-weight: normal;
}

ul#nav ul a,  ul#nav ul strong{
	color: black;
	width: 100%;
	padding: 3px 3px 3px 0;
	background-color: white;
}

ul#nav ul a:hover{
	background-color: white;
	text-decoration: underline;
	color: black;
}

ul#nav ul ul{
	margin-left: 16px;
}

/* END NAVIGATION */

#simplycounter {
    position: absolute;
    right: 4px;
    top: 120px;
    width: 12em;
    margin-top: -5em;
    font-size: 125%;
    background-color: white;
    border: solid 2px #000000;
    padding: 0.5em;
}

END

	
	
	

